!function(e){e.fn.gCalReader=function(a){function t(e,a){var t,n,r,s,o={months:{full:["","January","February","March","April","May","June","July","August","September","October","November","December"],"short":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},days:{full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],"short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"]}};e.length>10?(n=/(\d+)\-(\d+)\-(\d+)T(\d+)\:(\d+)/.exec(e),r=n[4]<12,s=r?parseInt(n[4])+":"+n[5]+" AM":n[4]-12+":"+n[5]+" PM",0===s.indexOf("0")&&(s=1===s.indexOf(":00")?5===s.indexOf("AM")?"MIDNIGHT":"NOON":s.replace("0:","12:"))):(n=/(\d+)\-(\d+)\-(\d+)/.exec(e),s="All Day");var i=parseInt(n[1]),d=parseInt(n[2]),l=parseInt(n[3]),c=new Date(i,d-1,l);switch(a){case"ShortTime":t=s;break;case"ShortDate":t=d+"/"+l+"/"+i;break;case"LongDate":t=o.days.full[c.getDay()]+" "+o.months.full[d]+" "+l+", "+i;break;case"LongDate+ShortTime":t=o.days.full[c.getDay()]+" "+o.months.full[d]+" "+l+", "+i+" "+s;break;case"ShortDate+ShortTime":t=d+"/"+l+"/"+i+" "+s;break;case"DayMonth":t=o.days["short"][c.getDay()]+", "+o.months.full[d]+" "+l;break;case"MonthDay":t=o.months.full[d]+" "+l;break;case"ShortMonthDay":t=o.months["short"][d]+" "+l;break;case"YearMonth":t=o.months.full[d]+" "+i;break;case"Day":t=o.days.full[c.getDay()];break;default:t=o.days.full[c.getDay()]+" "+o.months["short"][d]+" "+l+", "+i+" "+s}return t}var n=e(this),r=e.extend({calendarId:"en.usa#holiday@group.v.calendar.google.com",apiKey:"Public_API_Key",dateFormat:"LongDate",errorMsg:"No events in calendar",maxEvents:50,futureEventsOnly:!0,sortDescending:!0,showDescription:!0,showLocation:!0,showEndDate:!0,endDateFormat:"ShortTime"},a),s="",o="https://www.googleapis.com/calendar/v3/calendars/"+encodeURIComponent(r.calendarId.trim())+"/events?key="+r.apiKey+"&orderBy=startTime&singleEvents=true";r.futureEventsOnly&&(o+="&timeMin="+(new Date).toISOString()),console.log(o),e.ajax({url:o,dataType:"json",success:function(a){r.sortDescending&&(a.items=a.items.reverse()),a.items=a.items.slice(0,r.maxEvents),e.each(a.items,function(a,o){var i=o.start.dateTime||o.start.date||"",d=o.end.dateTime||o.end.date||"",l=o.summary||"",c=o.description,u=o.location,h=t(i,r.dateFormat.trim()),y=t(i,"Day"),m=t(i,"ShortTime"),D=t(d,"ShortTime");s='<div class="eventDate">'+h+"</div>",s+='<div class="eventTitle"><a href="'+o.htmlLink+'" target="_blank">'+l+"</a></div>",d&&"All Day"!=D&&(m+=" - "+D),s+='<div class="eventDay">'+y+" | "+m+"</div>",u&&r.showLocation&&(s+='<div class="location">Where: '+u+"</div>"),c&&r.showDescription&&(s+='<div class="description">'+c+"</div>"),e(n).append("<li>"+s+"</li>")})},error:function(a,t){e(n).append("<p>"+t+" : "+r.errorMsg+"</p>")}})}}(jQuery);